<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Shop</title>

<link rel="stylesheet prefetch" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
{# <script src="https://cdnjs.cloudflare.com/ajax/libs/prefixfree/1.0.7/prefixfree.min.js"></script> #}
<link rel="stylesheet" href="font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="css/style.css">

<style>

</style>

</head>

<body>

    <div class="fake-nav"></div><!-- special for content under navigation, when nav situate in top height==nav.height -->
    <div id="nav">

    <!--  START search input-->
        <div class="search-container">
            <input id="search-toggle" type="checkbox">
            <label class="search-backdrop" for="search-toggle"></label>
            <div class="search-content">
                <form id="search-form" action="">
                    <input type="search" class="input-search" placeholder="Input what you want to search" required>
                    <button type="submit" id="searchsubmit" class="fa fa-search fa-4x"></button>
                </form>
            </div>
        </div>
    <!--  END search input-->

        <ul class="list-menu">

        <!--   START bottom in responsive menu    -->
            <input id="responsive-toggle" type="checkbox">

            <label for="responsive-toggle" id="btm-open-menu">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
            </label>
        <!--   END bottom in responsive menu    -->

            <li class="item-menu shop">
                <i href="shop.html">shop</i>
                <ul class="sub-menu">
                    <li>
                        <h3 class="title-sub-menu"><a href="index.html">Home</a></h3>
                    </li>
                    <li>
                        <h3 class="title-sub-menu"><a href="blog.html">Blog</a></h3>
                    </li>
                    <li>
                        <h3 class="title-sub-menu"><a href="about.html">About</a></h3>
                    </li>
                    <li>
                        <h3 class="title-sub-menu"><a href="contact.html">Contact</a></h3>
                    </li>
                    <li>
                        <h3 class="title-sub-menu"><a href="shop.html">Shop</a></h3>
                    </li>
                </ul>
            </li>
            <li class="item-menu logo">
              <a href="index.html">LOGO<br><span>Short Description</span></a>
            </li>
            <li class="item-menu nav-icons">
                <label for="search-toggle"><i class="fa fa-search button-search" aria-hidden="true"></i></label>
                <label for="modal-basket-toggle" id="cart_trigger"><i class="fa fa-shopping-bag" aria-hidden="true"></i></label>
                <label for="modal-login-toggle"><i class="fa fa-user" aria-hidden="true"></i></label>
            </li>
        </ul>
    </div>
    <!--  END NAVIGAION  -->

  <header>
    <hgroup>
       <h1>My Web Shop</h1>

    </hgroup>
  </header>

  <div class="wrapper">

      <ul class="grid cards caption-hover">
          
          
      </ul>
  </div><!-- /container -->

      <!-- FOOTER -->
      <div class="footer">

        <div class="megamenu">
          <a href="#" class="megamenu__trigger">
            <span class="icon">
              <span></span><span></span><span></span><span></span>
            </span>
            Click to Explore
          </a>
          <div class="megamenu__wrap">
            <div class="megamenu__inner">
              <div class="megamenu__columns">
                <div class="megamenu__column megamenu__column--medium megamenu__column--divider">
                  <h4>Shop By Category</h4>
                  <div class="megamenu__columns">
                    <div class="megamenu__column megamenu__column--half">
                      <ul>
                        <li><a href="#">Blood Sugar Support</a></li>
                        <li><a href="#">Bone Support</a></li>
                        <li><a href="#">Brain & Memory</a></li>
                        <li><a href="#">Build Muscle, Exercise & Sports Nutrition</a></li>
                        <li><a href="#">Cardiovascular Support</a></li>
                        <li><a href="#">Children's Health</a></li>
                        <li><a href="#">Cleanse & Detox</a></li>
                        <li><a href="#">Digestive Health</a></li>
                        <li><a href="#">Endurance Support</a></li>
                        <li><a href="#">Energy Support</a></li>
                        <li><a href="#">Eye Health</a></li>
                        <li><a href="#">Hair, Skin & Nails</a></li>
                      </ul>
                    </div>
                    <div class="megamenu__column megamenu__column--half">
                      <ul>
                        <li><a href="#">Immune Support</a></li>
                        <li><a href="#">Joint & Muscle Support</a></li>
                        <li><a href="#">Men's Health</a></li>
                        <li><a href="#">Mood Support</a></li>
                        <li><a href="#">Seasonal & Homeopathic Allergy & Sinus</a></li>
                        <li><a href="#">Sleep Support</a></li>
                        <li><a href="#">Stress Management</a></li>
                        <li><a href="#">Weight Management</a></li>
                        <li><a href="#">Women's Health</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
                <div class="megamenu__column megamenu__column--divider">
                  <h4>Featured Packs</h4>
                  <div class="megamenu__columns">
                    <div class="megamenu__column megamenu__column--half">
                      <a href="#">
                        <img src="images/5.jpg" alt="" />
                      </a>
                    </div>

                    <div class="megamenu__column megamenu__column--half">
                      <ul>
                        <li><a href="#">Lorem ipsum dolor.</a></li>
                        <li><a href="#">Praesentium, reiciendis id.</a></li>
                        <li><a href="#">Suscipit, quisquam alias</a></li>
                        <li><a href="#">Similique, odio dolor</a></li>
                        <li><a href="#">Soluta, facere, assumenda.</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
                <div class="megamenu__column">
                  <h4>Featured Products</h4>
                  <div class="megamenu__columns">
                    <div class="megamenu__column megamenu__column--half">
                      <a href="#">
                        <img src="images/1.jpg" alt="" />
                      </a>
                    </div>
                    <div class="megamenu__column megamenu__column--half">
                      <ul>
                        <li><a href="#">Lorem ipsum dolor.</a></li>
                        <li><a href="#">Alias, fuga, repellendus.</a></li>
                        <li><a href="#">Quidem modi, officia.</a></li>
                        <li><a href="#">Eius, veniam consequuntur.</a></li>
                        <li><a href="#">Dicta reiciendis, quidem.</a></li>
                        <li><a href="#">Sint, assumenda, doloribus.</a></li>
                        <li><a href="#">Esse nihil, dignissimos.</a></li>
                      </ul>
                    </div>
                  </div>
                </div>
                <div class="megamenu__column megamenu__column--last">
                  <h4>Shop By Brand</h4>
                  <ul>
                    <li><a href="#">Lorem.</a></li>
                    <li><a href="#">Rem.</a></li>
                    <li><a href="#">Voluptate.</a></li>
                    <li><a href="#">Odio.</a></li>
                    <li><a href="#">Quis.</a></li>
                    <li><a href="#">Officiis!</a></li>
                    <li><a href="#">Voluptatem.</a></li>
                    <li><a href="#">Possimus.</a></li>
                    <li><a href="#">Possimus.</a></li>
                    <li><a href="#">Pariatur.</a></li>
                    <li><a href="#">Quae?</a></li>
                    <li><a href="#">Deserunt.</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="footer-inner">
 
          <div class="footer__columns">
            <div class="footer__column footer__column--large">
              <div class="company-info">
                <div class="company-info__line company-info__line--last">
                    <a href="#" class="company-info__social-link"><i class="fa fa-twitter"></i></a>
                    <a href="#" class="company-info__social-link"><i class="fa fa-youtube"></i></a>
                    <a href="#" class="company-info__social-link"><i class="fa fa-pinterest"></i></a>
                    <a href="#" class="company-info__social-link"><i class="fa fa-facebook"></i></a>
                    <a href="#" class="company-info__social-link"><i class="fa fa-google-plus"></i></a>
                    <a href="#" class="company-info__social-link"><i class="fa fa-instagram"></i></a>
                    <a href="#" class="company-info__social-link"><i class="fa fa-tumblr"></i></a>
                </div>
              </div>
            </div>
            <div class="footer__column">
              <div class="footer__links">
                <i class="fa fa-map"></i> 12345 Komarova Ave, KYIV
              </div>
            </div>
            <div class="footer__column">
              <div class="footer__links">
                  <a href="mailto:support@companyname.com"><i class="fa fa-envelope"></i> support@company.com</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- FOOTER -->
  <div id="cart">
        <h2>Cart</h2>
        <ul class="cart-items" id="cart_items">

        </ul> <!-- cd-cart-items -->

        <div class="cart-total">
            <p id="total-price">Total <span>00.00</span></p>
        </div> <!-- cd-cart-total -->

        <a href="#" class="checkout-btn fancy-btn open">Checkout</a>
        <p class="error"></p>
        <p class="go-to-cart"><a href="#">Go to cart page</a></p>
    </div> <!-- cd-cart -->

    <div class="modal-frame">
      <div class="modal">
         <div class="modal-inset">
             <div class="button close"><i class="fa fa-close"></i></div>
          
    <div class="modal-body">
    

    <div class="total-logo">
        <div class="total">
            <span>Total:</span>
            <span class="total-n">205,50 €</span>
        </div>
        <div class="logo">
            SHOPAHOLIC
        </div>
    </div>
    <!--End TOTAL-LOGO-->
    <div class="step">
        <div class="retry">Retry</div>
        <div class="line"></div>
        <div class="payment">Payment</div>
    </div>
    <!--End STEP-->
    <div class="cont-forms">
        <form class="form" autocomplete="off" novalidate>
            <fieldset class="card-number">
                <label for="card-num">Credit card number</label>
                <div class="flex-wrapper">
                    <input class="cc-number" type="num" maxlength="4" />
                    <input class="cc-number" type="num" maxlength="4" />
                    <input class="cc-number" type="num" maxlength="4" />
                    <input class="cc-number" type="num" maxlength="4" />
                </div>
            </fieldset>
            <fieldset class="card-holder">
                <label for="card-num">Credit card holder</label>
                <input type="text" />
            </fieldset>
            <fieldset class="card-expiration">
                <div class="expiry-ccv">
                    <div class="cont expiration-date">
                        <label for="card-num">Expiration Date</label>
                        <input type="numb" maxlength="2" />
                        <input class="last" type="num" maxlength="4" />
                    </div>
                    <div class="cont ccv">
                        <label for="card-ccv">ccv</label>
                        <input type="num" maxlength="3" />
                    </div>
                </div>
            </fieldset>
            <fieldset class="conf-button">
                <div class="flex-wrapper">
                    <button class="purchase"><span>Confirm purchase</span></button>
                    <div class="or-element"><span>- or -<span></div>
                    <button class="applepay"><span>Apple Pay</span></button>
                    </div>
            </fieldset>
        </form>
        </div><!--End CONT-FORMS-->
        <div class="button-cart">
            <img class="icon-cart" src="images/icona-shop.svg">
            <div class="product-in-cart"><span>3</span></div>
        </div>
    </div><!--End CONTAINER-->

    <div class="cont-product">
    

    </div>

    
          </div>
        </div>
      </div>
    </div>
    <div class="modal-overlay"></div>

<script src="js/jquery-3.2.1.min.js"></script>
<script type="text/javascript">

  $(document).ready(function() {

        var data = [{
        id: 0,
        name: 'Product 0',
        price: 177,
        carousel: [1,2,3],
        description: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quibusdam, natus'
    },
    {
        id: 1,
        name: 'Product 1',
        price: 77,
        carousel: [2,3,4],
        description: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quibusdam, natus'
    },
    {
        id: 2,
        name: 'Product 2',
        price: 88,
        carousel: [3,4,5],
        description: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quibusdam, natus'
    },
    {
      id: 3,
      name: 'Product 3',
      price: 277,
      carousel: [6,1,2],
      description: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quibusdam, natus'
    },
    {
      id: 4,
      name: 'Product 4',
      price: 277,
      carousel: [5,6,4],
      description: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quibusdam, natus'
    },
    {
      id: 5,
      name: 'Product 5',
      price: 277,
      carousel: [4,5,3],
      description: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quibusdam, natus'
    }
    ];

    var invoices = {
      total: 0,
      items: []
      
    };

  
function createItem(j){
    var figure = $('<figure>');

    var div = $('<div>');

    var div2 = div.clone().attr({'class': "images-wrapper",'index': data[j].id});

    var div3 = div.clone().attr('class', "controls");
    var div4 = div.clone().attr('class', "prev-arrow prev");
    div4.html('<i class="fa fa-arrow-circle-o-left" aria-hidden="true"></i>');
    div3.append(div4);
    var div5 = div.clone().attr('class', "next-arrow next");
    div5.html('<i class="fa fa-arrow-circle-o-right" aria-hidden="true"></i>');
    div3.append(div5);

    div2.append(div3);

    figure.append(div2);

    var figcaption = $('<figcaption>');

    var h3 = $('<h3>').html(data[j].name);

    h3.addClass('title'); 
    
    var span = $('<span>').html(data[j].price);
    span.addClass('price'); 

    var a = $('<a>').attr('href',"#!");
    a.addClass('add'); 
    a.text('Add To Cart');

    figcaption.append(h3);
    figcaption.append(span);
    figcaption.append(a);
    
    figure.append(figcaption);
    

    var div1 = div.clone().attr('class',"carousel");
    
    var img = $('<img>');

    for(var i=0; i<data[j].carousel.length;i++){
        var img1 = img.clone();
        img1.attr('src',"images/"+data[j].carousel[i]+".jpg");
        img1.attr('alt',data[j][name]);
        div1.append(img1);
    }

    var li = $('<li>').attr('productId', data[j].id);
    
    li.addClass('product');

    li.append(div1);
    li.append(figure);
    

    return li;
}

  for (var i=0; i<data.length; i++) {
    $(".grid").append(createItem(i));
    }



    $('body').on('click', '.product', function (event) {

       event.stopPropagation();

       var $itemID = $(this).attr('productId');

       var div = $('<div>');

       $(".wrapper").empty();11

       var divBlock =  div.clone(false).addClass("block");
    
     for (var i=0; i<data[$itemID].carousel.length; i++){

        var divBlockW =  div.clone(false).addClass("block-w");
        divBlockW.addClass("block"+i);

        divBlockW.attr('style', 'background-image:' + 'url(images/'+data[$itemID].carousel[i]+'.jpg)')
        
        var divBlockBack =  div.clone(false).addClass("back");

        var divBlockText =  div.clone(false).addClass("text");
        var divBlockContainer =  div.clone(false).addClass("containerName").text(data[$itemID].name);
        var divBlockDescription =  div.clone(false).addClass("hellothere").text(data[$itemID].description);

        divBlockText.append(divBlockContainer);
        divBlockText.append(divBlockDescription);
        divBlockBack.append(divBlockText);
        divBlockW.append(divBlockBack);
       
        divBlock.append(divBlockW);
    
    }

        $(".wrapper").append(divBlock);
    });


  var active = 'active'
  var block = '.block-w'
  var inactive = 'min'

  var text = '.fadetext'

  //Remove Functions
  function removeActive() {
    $(block).removeClass(active)
  }

  function removeInactive() {
    $(block).removeClass(inactive)
  }

  //jQuery

  $('body').on('click', '.block-w', function (event) {

    event.stopPropagation();
  
    $(block).removeClass(inactive)
    $(this).toggleClass(active).siblings().removeClass(active).toggleClass(inactive)
  })

  $(document).mouseover(function(e) {
    var container = $(block);
    if (container.has(e.target).length === 0) {
      setTimeout(removeInactive, 100);
      setTimeout(removeActive, 100);
    }
  });



function createCartItem(item_id, productName, price, bg){

        var li = $("<li></li>");
        li.attr("id",  'item_' + item_id);
        li.addClass("cart-product");

        var span = $('<span>');
        var input = $('<input>').attr({"class": "qty", 'id':"qty_"+item_id, "value": 1});

        span.append(input);

        var div = $('<div>').attr("class", "price");
        
        div.html(productName+'<br/>'+'<span class="item-prices" id="price_'+item_id+'">'+price+'</span>&nbsp;');

        var a = $('<a>');
        a.attr({"class": "item-remove img-replace", "href": "#"}).text("Remove");

        li.append(span);
        li.append(div);
        li.append(a);
        li.find('input.qty').attr('style', 'background-image:'+ bg);

       return li;
    }

$('.add').on('click', function (event) {

        event.stopPropagation();
    
        var item = $(this).parents('li');
        var bg = item.find('.images-wrapper').css('background-image');
        var title = item.find(".title").text();
        var price = item.find(".price").text();
        var item_id = item.attr('productId');
 
        var itemProduct = {
                  picture: '',
                  quantity: 0,
                  price: 0
                }

        if(document.getElementById("price_"+item_id))
          {
                var new_val = parseFloat($("#price_"+item_id).text());
                new_val +=parseFloat(price);
                $('#cart_items').find("#price_"+item_id).text(new_val.toFixed(2));
                var new_qty_val = parseFloat($("#qty_"+item_id).val());
                new_qty_val++;
                $("#qty_"+item_id).val(new_qty_val);

           }else{
                $('#cart_items').append(createCartItem(item_id, title, price, bg));

                itemProduct.picture = bg;
                itemProduct.price = price;
                itemProduct.quantity = item.find('.qty').val();
                invoices.items.push(itemProduct);
                console.log(invoices.items);

           };

            updateTotal();
    
           var removeButtons = $(".item-remove");

           removeButtons.each(function(index) {
                $(this).click(function(){
                           $(this).parent().remove();
                           updateTotal();
                });

           });

    });

      function updateTotal() {
          var quantities = 0,
          total = 0,
          $cartTotal = $('#total-price span'),
          items = $('#cart_items').children();
          
          var j = 0;
          items.each(function (index, item) {
              var $item = $(item);
              invoices.items[j].quantity = $item.find('.qty').val();
              total += parseFloat($item.find('.item-prices').text());
              j++;
          });

          invoices.total = parseFloat(Math.round(total * 100) / 100).toFixed(2);


          $cartTotal.text('$' + parseFloat(Math.round(total * 100) / 100).toFixed(2));
      }



    $('#cart_trigger').click(function (e) {
        if ($('#cart').hasClass('speed-in')) {
            $('#cart').removeClass('speed-in');
            $('body').removeClass('overflow-hidden');
        } else {
            $('body').addClass('overflow-hidden');
            $('#cart').addClass('speed-in');
        }
    });


    $modal = $('.modal-frame');
    $overlay = $('.modal-overlay');

    $modal.bind('webkitAnimationEnd oanimationend msAnimationEnd animationend', function(e){
      if($modal.hasClass('state-leave')) {
        $modal.removeClass('state-leave');
      }
    });

    $('.close').on('click', function(){
      $overlay.removeClass('state-show');
      $modal.removeClass('state-appear').addClass('state-leave');
    });

    $('.open').on('click', function(){
      $('#cart').removeClass('speed-in');
      $overlay.addClass('state-show');
      $modal.removeClass('state-leave').addClass('state-appear');

      $(".total-logo").find(".total-n").text(invoices.total);
      $(".product-in-cart").find("span").text(invoices.items.length);
  
      for (var i=0; i<invoices.items.length; i++){
        $('.cont-product').append(createProd(invoices.items[i]));      
      }

    });

    function createProd(prod){
      
      var div = $("<div>").addClass("product"); //div class="product first"

      var pic = $('<span>').addClass("img").css('background-image',prod.picture);

      div.append(pic);

      var div1 = div.clone(false).addClass("cont-options");
      var div2 = div.clone(false).addClass("quantity");
      var button = $('<button>').addClass("plus").text('+');
      var span = $('<span>').addClass("num").text(prod.quantity);
      var button1 = button.clone(false).addClass("minus").text('-');

      div2.append(button);
      div2.append(span);
      div2.append(button1);
      div1.append(div2);

      var button2 = button.clone(false).addClass("remove").text('remove');
      div1.append(button2);
      div.append(div1);
      return div;
    } 
   
   
    var carousel = $('.carousel');
    var imagesWrapper = $('.images-wrapper');

    var prevArrow = $('.prev');
    var nextArrow = $('.next');

    
    var imagesArray = [];
    var numberOfImages = [];
    
    for (var i=0; i<carousel.length; i++){

      var childNodes = $(carousel[i]).children();
     
      imagesArray[i] = [];

      for (var j = 0; j < childNodes.length; j++) {
      
          var currentNode = childNodes[j];
      
          if ($(currentNode).prop("tagName") === 'IMG') {
              imagesArray[i].push(currentNode.src);
              $(currentNode).addClass('hide');
          }
      }

      numberOfImages[i] = imagesArray[i].length;
      $(imagesWrapper[i]).css('background-image','url(' + imagesArray[i][0] + ')');
    }


      var currentImage = [];

      for (var i=0; i<carousel.length; i++){

            currentImage[i] = 0;

            $(prevArrow[i]).click(function (e) {
              
                handleSlideshowArrow('prev', $(this).parent().parent().attr('index'));
            });

            $(nextArrow[i]).click(function (e) {
              
                handleSlideshowArrow('next', $(this).parent().parent().attr('index'));
            });

        }

      function handleSlideshowArrow(val, i) {
        if (val === 'prev') {
            if (currentImage[i] > 0) {
                currentImage[i]--;
            } else {
                currentImage[i] = numberOfImages[i] - 1;
            }
        } else if (val === 'next') {
            if (currentImage[i] < numberOfImages[i] - 1) {
                currentImage[i]++;
            } else {
                currentImage[i] = 0;
            }
        }

        $(imagesWrapper[i]).addClass('fade-out');
        $(imagesWrapper[i]).css('background-image','url(' + imagesArray[i][currentImage[i]] + ')');
        $(imagesWrapper[i]).removeClass('fade-out');

    }

  var $mm = $('.megamenu');
  var $mmTrigger = $('.megamenu__trigger');
  var $mmWrap = $('.megamenu__wrap');


function openMegaMenu() {
    $mm.css({

      top: '-' + $mmWrap.outerHeight() + 'px'
    });
    $mmTrigger.find('.icon').addClass('open');
    $mm.addClass('open');
  }

  function closeMegaMenu() {
    $mm.removeClass('open');
    $mm.attr('style', '');
    $mmTrigger.find('.icon').removeClass('open');

  }

    // Mega Menu

  $mmWrap.css('top', $mmTrigger.outerHeight());

  $mmTrigger.on('click', function(e) {
    e.preventDefault();

    if ($mm.hasClass('open')) {
      closeMegaMenu();
    } else {
      openMegaMenu();
    }

  });

$('.cc-number').on('keyup change', function(){
    if ($(this).val().length == 4) {
      $(this).next().focus();
    } else if ($(this).val().length == 0) {
      $(this).prev().focus();
    }
});

$(".button-cart").on('click', function(e){
    e.stopPropagation();
    $(".cont-product").addClass("slide-right");
    $(".container").addClass("slide-cont-left");
    $(this).addClass("btn-hiding");
    setTimeout(function(){
       $(".cont-product").addClass("zindex");
   }, 300);
});

$(".product").on('click', function(e){
    e.stopPropagation();
    $(".cont-options").removeClass("slideup");
    $(".product").removeClass("active");
    $(this).addClass("active");
    $(this).find(".cont-options").addClass("slideup");
});

$(window).on( "click", function(){
  $(".product").removeClass("active");
    $(".cont-product").removeClass("zindex");
    $(".cont-product").removeClass("slide-right");
    $(".container").removeClass("slide-cont-left");
    $(".button-cart").removeClass("btn-hiding");
    $(".cont-options").removeClass("slideup");
});


});


</script>

</body>
</html>
